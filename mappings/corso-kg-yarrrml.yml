base: http://www.cefriel.com/corso-kg/mappings/

prefixes:
  kg: http://www.cefriel.com/corso-kg/data/
  ex: http://www.cefriel.com/corso-kg/schema/
  skos: http://www.w3.org/2004/02/skos/core#

mappings:
  unit:
    sources:
      - ['./../data/employees.csv~csv']
    s: 'http://www.cefriel.com/corso-kg/data/unit/$(unit)'
    po:
      - [a, foaf:Group]
      - [foaf:title, $(unit)]
  employee:
    sources:
      - ['./../data/employees.csv~csv']
    s: 'http://www.cefriel.com/corso-kg/data/employee/$(id)'
    po:
      - [a, foaf:Person]
      - [a, ex:Employee]
      - [foaf:name, $(name)]
      - [foaf:surname, $(surname)]
      - p: foaf:member
        o:
          - function: join(unit, equal($(unit),$(unit)))
  competences:
    sources:
      - ['./../data/competences-iri.csv~csv']
    s: 'http://data.europa.eu/snb/dcf/$(iri)'
    po:
      - [a, ex:Competence]
  assignment:
    sources:
      - ['./../data/assignment-iri.csv~csv']
    s: 'http://www.cefriel.com/corso-kg/data/assignment/$(employee_id)-$(competence_id)'
    po:
      - [a, ex:EmployeeCompetence]
      - [ex:level, $(level), xsd:int]
      - [ex:competence, 'http://data.europa.eu/snb/dcf/$(competence_id)']
      - p: ex:employee
        o:
          - function: join(employee, equal($(employee_id),$(id)))
      - p: ex:hasInterest
        o:
          - function: grel:controls_if
            parameters:
              - parameter: grel:bool_b
                value: "'1' == '$(interest)'"
              - parameter: grel:any_true
                value: "true"
                type: xsd:boolean
              - parameter: grel:any_false
                value: "false"
                type: xsd:boolean